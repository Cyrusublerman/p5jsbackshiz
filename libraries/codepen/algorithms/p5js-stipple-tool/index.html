<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stipple + Single-Stroke Path Tool</title>
  <style>
    body {
      margin: 0;
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: #111;
      color: #eee;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    #controls {
      width: 320px;
      background: #1c1c1c;
      padding: 16px;
      overflow-y: auto;
      box-sizing: border-box;
    }
    #controls h2 {
      margin: 16px 0 8px;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #8fd1ff;
    }
    #controls label {
      display: block;
      margin-top: 10px;
      font-size: 12px;
      color: #ccc;
    }
    #canvas-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0c0c0c;
    }
    .button-row {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      flex-wrap: wrap;
    }
    button {
      background: #2b2b2b;
      color: #eee;
      border: 1px solid #444;
      padding: 6px 10px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 12px;
    }
    button:hover {
      background: #3a3a3a;
    }
    .toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 6px;
      font-size: 12px;
    }
    input[type="range"] {
      width: 100%;
    }
    .status {
      margin-top: 12px;
      font-size: 11px;
      color: #9bd67d;
    }
  </style>
</head>
<body>
  <div id="controls">
    <h2>Source</h2>
    <div class="button-row">
      <button id="regenerate">Regenerate</button>
      <button id="reset">Reset Image</button>
    </div>
    <label>Load Image
      <input type="file" id="file-input" accept="image/*" />
    </label>
    <label>Seed (Stipple)
      <input type="number" id="seed-stipple" value="42" min="0" step="1" />
    </label>
    <label>Seed (Path)
      <input type="number" id="seed-path" value="7" min="0" step="1" />
    </label>
    <label>Seed (Flow)
      <input type="number" id="seed-flow" value="1337" min="0" step="1" />
    </label>

    <h2>Analysis</h2>
    <label>Smoothing Radius <span id="smooth-value"></span></label>
    <input type="range" id="smooth-radius" min="0" max="8" value="2" step="1" />
    <label>Canny Low Threshold <span id="edge-low-value"></span></label>
    <input type="range" id="edge-low" min="0.01" max="0.3" value="0.08" step="0.01" />
    <label>Canny High Threshold <span id="edge-high-value"></span></label>
    <input type="range" id="edge-high" min="0.05" max="0.6" value="0.22" step="0.01" />

    <h2>Stipple</h2>
    <label>Min Distance <span id="min-distance-value"></span></label>
    <input type="range" id="min-distance" min="3" max="18" value="8" step="1" />
    <label>Gamma <span id="gamma-value"></span></label>
    <input type="range" id="gamma" min="0.3" max="2.5" value="1.2" step="0.1" />
    <label>Density Scale <span id="density-value"></span></label>
    <input type="range" id="density-scale" min="0.2" max="1.4" value="1" step="0.05" />
    <label>Edge Weight <span id="edge-weight-value"></span></label>
    <input type="range" id="edge-weight" min="0" max="1" value="0.3" step="0.05" />
    <label>Edge Blur Radius <span id="edge-blur-value"></span></label>
    <input type="range" id="edge-blur" min="0" max="8" value="3" step="1" />
    <label>Edge Exponent <span id="edge-exp-value"></span></label>
    <input type="range" id="edge-exp" min="0.5" max="3" value="1.4" step="0.1" />

    <h2>Path</h2>
    <label>Path Mode</label>
    <select id="path-mode">
      <option value="monotone-y">Monotone Y (Guaranteed)</option>
      <option value="monotone-x">Monotone X</option>
      <option value="nearest">Nearest Neighbor</option>
      <option value="christofides">Christofides</option>
      <option value="delaunay">Delaunay Greedy</option>
    </select>
    <div class="toggle">
      <input type="checkbox" id="show-path" checked />
      <label for="show-path">Show Single Stroke</label>
    </div>

    <h2>Flow Lines</h2>
    <label>Seed Spacing <span id="flow-spacing-value"></span></label>
    <input type="range" id="flow-spacing" min="12" max="60" value="24" step="2" />
    <label>Step Size <span id="flow-step-value"></span></label>
    <input type="range" id="flow-step" min="1" max="6" value="2" step="0.5" />
    <label>Max Steps <span id="flow-max-value"></span></label>
    <input type="range" id="flow-max" min="20" max="200" value="80" step="10" />
    <label>Noise Strength <span id="flow-noise-value"></span></label>
    <input type="range" id="flow-noise" min="0" max="1" value="0" step="0.1" />

    <h2>Contours</h2>
    <label>Interval <span id="contour-interval-value"></span></label>
    <input type="range" id="contour-interval" min="0.05" max="0.3" value="0.12" step="0.01" />

    <h2>Display</h2>
    <div class="toggle">
      <input type="checkbox" id="show-stipple" checked />
      <label for="show-stipple">Show Stipple Points</label>
    </div>
    <div class="toggle">
      <input type="checkbox" id="show-edges" />
      <label for="show-edges">Show Edges</label>
    </div>
    <div class="toggle">
      <input type="checkbox" id="show-flow" />
      <label for="show-flow">Show Flow Lines</label>
    </div>
    <div class="toggle">
      <input type="checkbox" id="show-contours" />
      <label for="show-contours">Show Contours</label>
    </div>

    <div class="status" id="status"></div>
  </div>
  <div id="canvas-container"></div>

  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.min.js"></script>
  <script type="module" src="./main.js"></script>
</body>
</html>
